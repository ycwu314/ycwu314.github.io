---
title: hexoé¡µé¢ä¼˜åŒ–
date: 2019-08-07 20:17:38
tags: [hexo, æŠ€å·§, web]
categories: [hexo]
keywords: [hexoä¼˜åŒ–, é¡µé¢ä¼˜åŒ–]
description:
---

åšå®¢æ‰“å¼€æœ‰ç‚¹æ…¢ï¼Œäºæ˜¯åšä¼˜åŒ–ã€‚é¡µé¢ä¼˜åŒ–å·¥å…·ä½¿ç”¨[PageSpeed Insights](https://developers.google.com/speed/pagespeed/insights/)ã€‚

# æ€è·¯

ä¼˜åŒ–webé¡µé¢çš„å¸¸è§æ€è·¯
- å‹ç¼©æ–‡æœ¬ã€å›¾ç‰‡ç­‰èµ„æº
- é™æ€èµ„æºä½¿ç”¨cdn
- åˆå¹¶jsã€cssæ–‡ä»¶ï¼ŒæŠŠå¤šä¸ªè¯·æ±‚èµ„æºè¯·æ±‚åˆå¹¶ä¸ºä¸€ä¸ª
- è®¾ç½®é€‚å½“çš„é™æ€èµ„æºç¼“å­˜æ—¶é—´
- èµ„æºæ‡’åŠ è½½
- ä¼˜åŒ–èµ„æºåŠ è½½é¡ºåº

<!-- more ->

# å›¾ç‰‡ä¼˜åŒ–

## æ–‡ç« å›¾ç‰‡

å¹³æ—¶æ–‡ç« çš„å›¾ç‰‡éƒ½æ˜¯pngæ ¼å¼ï¼Œå¹¶ä¸”ä½¿ç”¨tinypng.comä¼˜åŒ–è¿‡ï¼Œå› æ­¤é™¤éæ”¹ä¸ºwebpï¼Œå¦åˆ™ä¼˜åŒ–ç©ºé—´ä¸å¤§ã€‚
ä¸€æ—¦æ”¹äº†å›¾ç‰‡æ ¼å¼ï¼Œè¿˜è¦ä¿®æ”¹mdæ–‡ä»¶ï¼Œéœ€è¦å†™è„šæœ¬å®ç°ã€‚ç›®å‰æ¥è¯´äº§å‡ºæŠ•å…¥æ¯”ä¸é«˜ã€‚ä»¥åæœ‰ç©ºå†æã€‚

## èƒŒæ™¯å›¾

åŸæ¥çš„èƒŒæ™¯å›¾ç½‘ä¸Šæ‰¾æ¥çš„ï¼Œå¾ˆå¤§ï¼Œ1.6MBï¼Œå³ä½¿ä½¿ç”¨cdnåŠ è½½ä¹Ÿè¦å¿«1sã€‚æ˜¯ä¼˜åŒ–çš„é¦–è¦å¯¹è±¡ã€‚æŸ¥çœ‹èƒŒæ™¯å›¾ï¼Œå¤§å°æ˜¯`4096 x 2315`ï¼Œæ”¯æŒ4Kã€‚ã€‚ã€‚ä½†æ˜¯ç›®å‰4Kæœªæ™®åŠï¼Œç›´æ¥ç¼©å°50%çš„å°ºå¯¸ï¼
è¿™é‡Œå®‰åˆ©ä¸€ä¸ªåœ¨çº¿å›¾ç‰‡å·¥å…·ï¼Œhttps://squoosh.app/ ï¼Œæœ‰å¤šç§æ ¼å¼ã€ç®—æ³•ã€å‚æ•°å¯ä»¥é€‰æ‹©ã€‚
æœ€ç»ˆçš„jpgæ˜¯87KBï¼Œå¦‚æœè½¬æ¢webpï¼Œå¯ä»¥ç¼©å°åˆ°56KBã€‚ä½†æ˜¯è·¯è¿‡å›¾åºŠä¸æ”¯æŒwebpæ ¼å¼ï¼Œäºæ˜¯é€‰æ‹©è¾“å‡ºpngï¼Œå†ä¿å­˜åˆ°å›¾åºŠã€‚

**ä¼˜åŒ–æ•ˆæœï¼šèƒŒæ™¯å›¾å¤§å°ä»1.6MBå˜ä¸º87KBã€‚**

## avatar

å¤´åƒæ˜¯ä»å¾®ä¿¡å¤åˆ¶è¿‡æ¥çš„ã€‚å°ºå¯¸`960 x 960`ï¼Œå¤§å°105KBã€‚å¯¹äºå¤´åƒæ¥è¯´ï¼Œå®åœ¨å¤ªå¤§ã€‚ç¼©æ”¾å¤§å°ï¼Œå†è½¬æ¢webpæ ¼å¼ï¼Œ8KBä¸åˆ°ã€‚
**ä¼˜åŒ–æ•ˆæœï¼šå¤´åƒå¤§å°ä»105KBå˜ä¸º8KBã€‚**

## å›¾ç‰‡æ‡’åŠ è½½

é¦–é¡µæ–‡ç« æ¯”è¾ƒå¤šï¼Œé»˜è®¤ä¸‹è½½æ‰€æœ‰å›¾ç‰‡ï¼Œå¯¼è‡´åŠ è½½ç€‘å¸ƒæ—¶é—´å˜é•¿ã€‚ç†æƒ³çš„æƒ…å†µæ˜¯ï¼ŒåªåŠ è½½å‰é¢çš„å›¾ç‰‡ï¼Œå¾€ä¸‹æ»šåŠ¨å†åŠ è½½æ–°çš„å›¾ç‰‡ã€æˆ–è€…åœ¨ç©ºé—²æ—¶è‡ªåŠ¨åŠ è½½å›¾ç‰‡ï¼Œå®ç°å›¾ç‰‡çš„æ‡’åŠ è½½ã€‚
è¿™é‡Œä½¿ç”¨çš„`hexo-lazyload-image`
```
npm install hexo-lazyload-image --save
```
ç„¶ååœ¨é¡¹ç›®çš„`_config.yml`å¢åŠ é…ç½®
```yml
lazyload:
  enable: true 
  onlypost: false
  loadingImg: # eg ./images/loading.gif 
```
**ä¼˜åŒ–æ•ˆæœï¼šé¦–é¡µå›¾ç‰‡åŠ è½½æ•°é‡å‡å°‘ä¸€åŠä»¥ä¸Šã€‚**

ä½†æ˜¯è¿™ä¸ªæ’ä»¶æœ‰ä¸è¶³ï¼Œæ»šåŠ¨ä¹‹åè‡ªåŠ¨åŠ è½½å›¾ç‰‡æ¯”è¾ƒæ…¢ã€‚ã€‚ã€‚é€šå¸¸è¦1åˆ°3ç§’æ‰æ˜¾ç¤ºã€‚

# å†…å®¹å‹ç¼©

hexoé»˜è®¤ç”Ÿæˆçš„htmlï¼Œæœ‰å¾ˆå¤šç©ºè¡Œå’Œç©ºæ ¼ã€‚
{% asset_img v1_æ–‡ç« æœªå‹ç¼©.png htmlå‹ç¼© %}
é»˜è®¤å¸¦çš„cssã€jsä¹Ÿæ˜¯å­˜åœ¨å‹ç¼©çš„ç©ºé—´ã€‚è¿™é‡Œä½¿ç”¨`hexo-neat`æ’ä»¶
```
npm install hexo-neat --save
```
ç„¶ååœ¨é¡¹ç›®çš„`_config.yml`å¢åŠ é…ç½®
```yml
# æ–‡ä»¶å‹ç¼©ï¼Œè®¾ç½®ä¸€äº›éœ€è¦è·³è¿‡çš„æ–‡ä»¶ 
# hexo-neat
neat_enable: true
# å‹ç¼© html
neat_html:
  enable: true
  exclude:
# å‹ç¼© css
neat_css:
  enable: true
  exclude:
    - '**/*.min.css'
# å‹ç¼© js
neat_js:
  enable: true
  mangle: true
  output:
  compress:
  exclude:
    - '**/*.min.js'
    - '**/index.js'
```
æ³¨æ„è¦è·³è¿‡ä¸€äº›å·²ç»å‹ç¼©äº†çš„æ–‡ä»¶ã€‚å¦å¤–ï¼Œä¸è¦å¿½ç•¥`swig`ã€`md`æ–‡ä»¶ã€‚å®‰è£…hexo-neatä¹‹åï¼Œ`hexo g`ä¼šè‡ªåŠ¨å‹ç¼©æ–‡ä»¶ï¼Œæ—¶é—´å˜é•¿
{% asset_img v1_hexo-neatå‹ç¼©.png "html neat" %}

**ä¼˜åŒ–æ•ˆæœï¼šæ–‡ç« å¤§å°å‡å°‘1/3ä»¥ä¸Šã€‚**

# cdnä¼˜åŒ–

é»˜è®¤ä»ç«™ç‚¹åŠ è½½cssã€jsèµ„æºã€‚å…¶å®hexo nextæä¾›äº†jqueryã€fancyboxç­‰åº“çš„cdnè·¯å¾„ã€‚å…·ä½“åœ¨nextçš„`_config.yml`æŸ¥æ‰¾å°±æ˜¯äº†ã€‚
nexté»˜è®¤æä¾›çš„æœ‰cloudfareã€jsdelivrï¼Œæ„Ÿè§‰cloudfareè¦å¿«äº›ã€‚

ä»åŠ è½½è·¯å¾„å‘ç°ç»Ÿè®¡è®¿é—®äººæ•°çš„ä¸è’œå­`https://busuanzi.ibruce.info/`çš„jsæ–‡ä»¶æ²¡æœ‰åšç¼“å­˜ã€‚ç½‘ä¸Šæ‰¾åˆ°ä¸€ä¸ªjsçš„cdnè·¯å¾„`https://cdn.jsdelivr.net/npm/busuanzi@2.3.0/bsz.pure.mini.js`ï¼Œä¿®æ”¹æ–‡ä»¶åœ¨`\themes\next\layout\_third-party\analytics\busuanzi-counter.swig`ã€‚

{% asset_img v1_ç¼“å­˜ç­–ç•¥.png ç¼“å­˜ç­–ç•¥ %}
å¦å¤–å‘ç°github pagesçš„é™æ€èµ„æºç¼“å­˜æ—¶é—´æ˜¯10minã€‚

**ä¼˜åŒ–æ•ˆæœï¼šå…¬å…±åŸºç¡€åº“ä»cdnä¸‹è½½ï¼Œå‡å°‘äº”å…­ä¸ªhttpè¯·æ±‚**

# å­—ä½“ä¼˜åŒ–

>åˆ©ç”¨ font-display è¿™é¡¹ CSS åŠŸèƒ½ï¼Œç¡®ä¿æ–‡æœ¬åœ¨ç½‘é¡µå­—ä½“åŠ è½½æœŸé—´å§‹ç»ˆå¯¹ç”¨æˆ·å¯è§ã€‚
{% asset_img v1_fontawesome.png %}
è¿™ä¸ªä¸çŸ¥é“æ€ä¹ˆä¼˜åŒ–ï¼Œä»¥åå†ç ”ç©¶ã€‚

# ä¼˜åŒ–æ•ˆæœ

{% asset_img v1_desktop.png "page speed" %}
é€Ÿåº¦æ˜æ˜¾æ¯”ä»¥å‰å¿«äº†ğŸ˜„

# å°ç»“

ç”¨åˆ°çš„æ’ä»¶åˆ«å¿˜äº†æ›´æ–°`.travis.yml`
```yml
install:
  - npm install -g hexo --save
  - npm install hexo-lazyload-image --save
  - npm install hexo-neat --save
```